os: linux

language: ruby

cache: bundler

rvm:
  - 2.4.9
  - 2.5.7
  - 2.6.5
  - 2.7.0
  - ruby-head

gemfile:
  - Gemfile
  - gemfiles/Gemfile.rails-5-2
  - gemfiles/Gemfile.rails-6.0

install:
  - bundle install

script:
  - bundle exec rake --trace test
  - bundle exec rubocop --rails Gemfile \
    gemfiles/Gemfile.rails-5-2 \ gemfiles/Gemfile.rails-6.0 \
    lib/ test/ Rakefile

matrix:
  fast_finish: true
  exclude:
    - gemfile: gemfiles/Gemfile.rails-6.0
      rvm: 2.4.9
